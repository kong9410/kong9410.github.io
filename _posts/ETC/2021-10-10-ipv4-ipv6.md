---
title: ipv4와 ipv6
tags: network
---

# IP(Internet Protocol) Address

컴퓨터는 땅속이나 물밑에 매장된 케이블이나 wirelessly로 커뮤니케이션을 한다. 만일 내가 파일을 인터넷으로 부터 다운로드하려면 다른 컴퓨터들이 내 컴퓨터의 위치를 찾을 수 있어야한다. 해당 위치를 찾을 수 있는 주소를 보고 IP 주소라고 한다.

IP는 여러개의 숫자로 이루어져있는 주소인데 기존에는 ipv4 방식을 사용하였다. 총 32비트의 숫자로 표현이 가능하며 약 40억개의 경우의 수가 나올 수 있다. 하지만 스마트기기가 많아진 오늘날에는 40억개는 터무니 없이 부족한 숫자이기 때문에 ipv6라는 것이 도입되어 ipv4와 같이 사용하고 있다.

IP는 사용 용도마다 대역이 다르다. ICANN이란 곳에서 국가별로 관리를 하고 우리나라는 KISA(한국 인터넷 진흥원)에서 관리를한다.

| ipv4                                     | ipv6                                     |
| ---------------------------------------- | ---------------------------------------- |
| 4개의 숫자로 구성됨                              | 8개의 숫자로 구성됨                              |
| 구분기호 : `.`                               | 구분기호 : `:`                               |
| 10진수로 표기                                 | 16진수로 표기                                 |
| 한개의 숫자당 00000000 ~ 11111111 (0 ~ 256) 비트를 가짐 | 한개의 숫자당 0000000000000000 ~ 1111111111111111 (0 ~ FFFF) 비트를 가짐 |
| 전체 32비트를 가짐                              | 전체 128비트를 가짐                             |
| 사용가능한 ip 개수 2^32                         | 사용가능한 ip 개수 2^128                        |
| 클래스로 분리                                  | 서브넷팅을 사용하여 주소 공간 할당에 맞게 네트워크 크기 조정       |
| 브로드캐스트 주소 사용                             | 멀티캐스트 그룹 사용                              |
| ex) 168.126.35.122                       | ex) 2001:0DB8:AC10:FE01:0000:0000:0000:0000 |

## 서브넷 마스크(Subnet Mask)

- IP 주소에 대한 네트워크 아이디와 호스트 아이디를 구분하기 위해 사용된다.
- ip와 마찬가지로 32bit 체계이다.
- 공통 비트 1로 채워 1이 연속된구간은 공통비트로 네트워크 아이디를 사용하고 0인 부분을 호스트 아이디로 사용한다
- 192.168.1.0/24와 192.168.8.0/24은 같은 네트워크 대역인가?
  - 192.168.1.0/24는 192.168.1.0 ~ 192.168.1.255 까지 범위를 가진다
  - 192.168.8.0/24는 192.168.8.0 ~ 192.168.8.255 까지 범위를 가진다
  - 때문에 같은 네트워크 대역이 아니다.

### prefix

- 서브넷 마스크 맨 앞의 비트부터 1의 개수를(공통비트 수) 표기하는 방식
- 255.255.255.0 인 경우 /24로 표기

## IP 분류

### Dynamic Ip Address

- 스마트폰이나 랩탑을 사용할 때 ISP(Internet Service Provider) 에서 할당 가능한 아이피 주소를 해당 기기에 할당한다.
- 다음에 인터넷을 다시 사용할 때 ISP는 제공해줄 수 있는 range내에서 다시 다른 IP 주소를 제공해준다.
- IP주소를 그때 그때 할당해주기 때문에 IP주소가 바뀔수가 있다.
- 유동 IP의 서버구축은 DDNS(Dynamic DNS)를 사용한다. (사용자가 도메인 주소로 해당 서버에 접근할 때)
- 유동 IP 서버는 ip가 바뀔 때 DDNS에 알림으로써 주소를 바꾸고 도메인이름으로 접속할 때 바뀐 주소로 접속이 가능하다

### Static Ip Address

- IP 주소가 바뀌지 않고 영구적이다.
- 예를 들어 DNS서버가 사용한다.
- 쉽게 추적이 가능하기 때문에 보안에 취약할 수 있다.


### Public IP

- 세계에서 단 하나만 존재하는 IP 주소
- 서버 역할을 하는 컴퓨터는 반드시 고유한 주소가 필요하다. (이전에 접속하려했던 IP주소를 입력하면 오류가 난다.)

### Private IP

![그림1](https://user-images.githubusercontent.com/37204770/136687658-5180f30b-c328-4b51-90eb-249c85b26e03.jpg)

- 공유기를 이용해 만들 수 있는 가상 IP 주소
- 공유기로 연결된 내부망에 적용되는 IP주소이다

#### 사설 IP 클래스

A 클래스 사설IP 대역: 10.0.0.0 ~ 10.255.255.255
소수의 대형 네트워크

B 클래스 사설IP 대역: 172.16.0.0 ~ 172.31.255.255

C 클래스 사설IP 대역: 192.168.0.0 ~ 192.168.255.255
수천개의 소형 네트워크

#### 사설 IP로 서버 운영법

- 포드포워딩 이용
- 회사에서 부여받은 공인 IP 219.214.33.125라고 가정
- 세대의 컴퓨터에 192.168.0.2 192.168.0.3 192.168.0.4를 사용
- 80포트로 들어오는 패킷을 192.168.0.3으로 보내준다
- 이렇게하여 컴퓨터를 192.168.0.3 컴퓨터를 웹 서버 컴퓨터로 사용할 수 있다.

#### 사설망의 문제점

- 사설망 중 하나의 컴퓨터가 가상 IP가 아닌 205.153.32.30 이라는 IP를 사용한다 가정
- 192.168.0.3이라는 가상 IP를 사용하고 있는 컴퓨터가 공유기를 거쳐 원래의 목적지인 205.153.32.30에 도달하는 것이 아닌 사설 네트워크 망 내부의 205.153.32.30 ip를 가지고있는 컴퓨터에 접근하게됨

## NAT(Network Address Translation)

- 공유기가 하나의 공인 IP를 내부 사설 IP로 나누는 기술
- 사설 IP의 사용으로 내부망을 보호하는 역할을 수행

## VIP란

사설 네트워크와 비슷한 개념이라고 보면 된다. 로드밸런서 등에 사용이 되는데 서버 여러대를 묶고 하나의 서버처럼 사용하고 싶을 때 로드밸런서라는 것을 사용한다. 로드밸런서는 외부에서 요청이 들어올 때 적절한 서버와 연결해주는 역할을 한다. 요청하는 쪽에서는 어느 서버에 요청을 해야할지를 모르기 때문에 VIP로 요청을 보내게된다. 로드밸런서는 VIP를 가지고있고 해당 요청을 받은 로드밸런서는 본인만의 정책에 의해 서버 중 하나와 연결시켜준다.

다시 말해 하나의 호스트에 여러 개의 IP 주소를 할당하는 기술이다.

## 출처

[What is IP address and types of IP address - IPv4 and IPv6 \| TechTerms - YouTube](https://www.youtube.com/watch?v=8npT9AALbrI)

[아이피 주소(IP Address)의 개념을 자세히 이해해보자 (공인 IP, 사설 IP, 고정 IP, 유동 IP와 서버 구축) - YouTube](https://www.youtube.com/watch?v=pRWD7oTeuFw)

[[개발상식\] 26. 로드밸런싱과 클러스터링 (tistory.com)](https://asfirstalways.tistory.com/320)